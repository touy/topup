<html>

<head>
    <style>
        .center {margin: auto; width: 50%;}
    </style>
    <script src="public/js/jquery-1.12.4.min.js"></script>
    <script src="public/js/wz_jsgraphics.js"></script>
    <script src="public/js/jquery.btree.js"></script>
    <!-- <script src="public/js/shape.js"></script> -->
    <script>
        // BIG THANKS , BIG THUMB TO THE GUY
        // https://frank-mich.com/jQuery/
        var myTree;
        $(function(){
            myTree = $("#treeDiv").btree()[0];
        });
        // loading data
        var arr=[];
        $(function(){
            //arr , arrange from Left to Right from Top to bottom
            arr[0]=null;
            for (var index = 1; index < 16; index++) {
                if(index<7)
                    arr.push("<div  style='border-style: inset;' ><span onclick='clickme("+index+")' >"+index+"</span></div>");
                else
                    arr.push('<div><span>X</span></div>');
            }
        });
        // mapping
        var _arr=[];
        $(function(){
            // from arr mapping to treeDiv            
            // 1-8,2-4, 3-12, 4-2,5-6,6-10,7-14,8-1,9-3,10-5,11-7,12-9,13-11,14-13,15-15                        
            _arr.push(arr[8]);
            _arr.push(arr[4]);
            _arr.push(arr[9]);
            _arr.push(arr[2]);
            _arr.push(arr[10]);
            _arr.push(arr[5]);
            _arr.push(arr[11]);
            _arr.push(arr[1]);
            _arr.push(arr[12]);
            _arr.push(arr[6]);
            _arr.push(arr[13]);
            _arr.push(arr[3]);
            _arr.push(arr[14]);
            _arr.push(arr[7]);
            _arr.push(arr[15]);
            html='';
            $("#treeDiv").html('');
            for (var index = 0; index < _arr.length; index++) {     
                //$("#box"+(index+1)).html(_arr[index]);                         
                $("#treeDiv").append(_arr[index]);
                //console.log(_arr[index]);
            }                        
        });

        function redraw(){
            myTree.clear();
            myTree = $("#treeDiv").btree({
                branchColor: '#000000',
                branchStroke: 1,
                hSpace: 9,
                vSpace: 70,
                borderWidth: 1,
                horizontal: false,
                flip: true
            })[0];
        }
function clickme(i){
    alert('me'+i);
}
function mich(){
	$("#box1").css("left", "");
	alert($("#box1").css("left") + " - " + $("#box1").css("right"));
}
    </script>
    
</head>

<body onload="loadCanvas()">
    <!-- <div class='input-box'>
        <input id='tree-input' type='number' placeholder='Enter number'>
        <button id='add-to-tree' onclick="addToTree()">Add To Tree</button>
        
    </div> -->
    <button id='drawtree' onclick="redraw()">draw tree</button>
    <div id="treeDiv" style="overflow: hidden; height: 10px; border-style: solid; border-width: 0px; border-color: #b49393;">
            <div style="border-style: inset;" >
                <span onclick="clickme()" id="box1"> 
                    <img title="HI" width="48px" height="48px" src='https://www.w3schools.com/tags/img_the_scream.jpg'/>
                    <div>HI</div>
                </span>
            </div>
            <div style="border-style: inset;">
                <span onclick="clickme()" id="box2">Box2</span>
            </div>
            <div style="border-style: inset;">
                <span onclick="clickme()" id="box3">Box3</span>
            </div>
            <div style="border-style: inset;">
                <span onclick="clickme()" id="box4">Box4</span>
            </div>
            <div style="border-style: inset;">
                <span onclick="clickme()" id="box5">Box5</span>
            </div>
            <div style="border-style: inset;">
                <span onclick="clickme()" id="box6">Box6</span>
            </div>
            <div style="border-style: inset;">
                <span onclick="clickme()" id="box7">Box7</span>
            </div>
            <div style="border-style: inset;">
                <span onclick="clickme()" id="box8">Box8</span>
            </div>
            <div style="border-style: inset;">
                <span onclick="clickme()" id="box9">Box9</span>
            </div>
            <div style="border-style: inset;" >
                <span onclick="clickme()" id="box10">Box10</span>
            </div>
            <div style="border-style: inset;">
                <span onclick="clickme()" id="box11">Box11</span>
            </div>
            <div style="border-style: inset;">
                <span onclick="clickme()" id="box12">Box12</span>
            </div>
            <div style="border-style: inset;">
                <span onclick="clickme()" id="box13">Box13</span>
            </div>
            <div style="border-style: inset;">
                <span onclick="clickme()" id="box14">Box14</span>
            </div>
            <div style="border-style: inset;">
                <span onclick="clickme()" id="box15">Box15</span>
            </div>
        </div>





    <!-- <div class="tree center" > 
        <canvas id='my-canvas' width="400" height="400">
            Your browser doesnot support canvas
        </canvas>
    </div>
    <canvas id="canvas" width="400" height="300">
            This text is displayed if your browser does not support HTML5 Canvas.
    </canvas> -->
    <!-- <script>
        function loadCanvas(){
            var s = new CanvasState(document.getElementById('canvas'));
            s.addShape(new Shape(40,40,50,50)); // The default is gray
            s.addShape(new Shape(60,140,40,60, 'lightskyblue'));
            // Lets make some partially transparent
            s.addShape(new Shape(80,150,60,30, 'rgba(127, 255, 212, .5)'));
            s.addShape(new Shape(125,80,30,80, 'rgba(245, 222, 179, .7)'));
            console.log(s);
        }
        </script>
    <script>
        // Represents the node in the tree. Will be displayed as a small circle in the browser.
        // x, y -> x, y co-ordinates of the center of circle
        // r    -> radius of the circle
        // ctx  -> context of the canvas
        // data -> data to be displayed (Only number)

        var Node = function(x,y,r, ctx, data) {
            // left child of a node
            this.leftNode = null; 
            // right child of a node
            this.rightNode = null;
            
            // draw function. Responsible for drawing the node
            this.draw = function() {
            ctx.beginPath();
            ctx.arc(x, y, r, 0, 2*Math.PI); 
            ctx.stroke();
            ctx.closePath();
            ctx.strokeText(data, x, y);
            };
            
            // Simple getters
            this.getData = function() { return data; }; 
            this.getX = function() { return x; };
            this.getY = function() { return y; };
            this.getRadius = function() { return r; };
            
            // Returns coordinate for the left child
            // Go back 3 times radius in x axis and 
            // go down 3 times radius in y axis
            this.leftCoordinate = function() {
            return {cx: (x - (3*r)), cy: (y + (3*r))}
            };
            // Same concept as above but for right child        
            this.rightCoordinate = function() {
            return {cx: (x + (3*r)), cy: (y+(3*r))}
            };
        };
        
        // Draws a line from one circle(node) to another circle (node) 
        var Line = function() {
            // Takes 
            // x,y      - starting x,y coordinate
            // toX, toY - ending x,y coordinate
            this.draw = function(x, y, toX, toY, r, ctx) {
            var moveToX = x;
            var moveToY = y + r;
            var lineToX = toX;
            var lineToY = toY - r;
            ctx.beginPath();
            ctx.moveTo(moveToX, moveToY);
            ctx.lineTo(lineToX, lineToY);
            ctx.stroke(); 
            };
        };
        
        // Represents the btree logic
        var BTree = function() {
            var c = document.getElementById('my-canvas');
            var ctx = c.getContext('2d');
            var line = new Line();
            this.root = null;
            
            var self = this;
            
            // Getter for root
            this.getRoot = function() { return this.root; };
            
            // Adds element to the tree
            this.add = function( data) {
            // If root exists, then recursively find the place to add the new node
            if(this.root) {
                this.recursiveAddNode(this.root, null, null, data);  
            } else {
            // If not, the add the element as a root 
                this.root = this.addAndDisplayNode(200, 20, 15, ctx, data);
                return;
            } 
            };
        
            // Recurively traverse the tree and find the place to add the node
            this.recursiveAddNode = function(node, prevNode, coordinateCallback, data) {
            if(!node) {
                // This is either node.leftCoordinate or node.rightCoordinate
                var xy = coordinateCallback();
                var newNode = this.addAndDisplayNode(xy.cx, xy.cy, 15, ctx, data);
                line.draw(prevNode.getX(), prevNode.getY(), xy.cx, xy.cy, prevNode.getRadius(), ctx)
                return newNode; 
            } 
            else {
                if(data <= node.getData()) {
                node.left = this.recursiveAddNode(node.left, node, node.leftCoordinate, data);
                } 
                else {
                node.right = this.recursiveAddNode(node.right, node, node.rightCoordinate, data);
                }
                return node;
            }
            };
            
            // Adds the node to the tree and calls the draw function
            this.addAndDisplayNode = function(x, y, r, ctx, data) {
            var node = new Node(x, y, r, ctx, data);
            node.draw();
            return node;
            };
        };
        
        var addToTree = function() {
            input = document.getElementById('tree-input');
            value = parseInt(input.value);
            if(value)
                btree.add(value);
            else
            alert("Wrong input");
        };
        
        var btree = new BTree();
    </script> -->
</body>

</html>