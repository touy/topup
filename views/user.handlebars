<script src="/static/js/main.js" type="text/javascript" charset="utf-8">
</script>
<script type="text/javascript" charset="utf-8" >
var fullUrl = location.protocol+'//'+location.hostname+(location.port ? ':'+location.port: '');
var fullHost=location.hostname+(location.port ? ':'+location.port: '');
	app.factory('WS', function($websocket) {
      					var ws = $websocket("ws://" + document.location.host +document.location.pathname + "atpendpoint");
                        var datacollection = [];
                        var heartbeatcollection=[];
                        var errorcollection=[];
                        ws.onMessage(function (event) {
                            //console.log('message: ', event.json);
                            var response;
                            try {
                                if (angular.isString(event.data)) {
                                    response=JSON.parse(event.data);
                                }
                                else if (angular.isObject(event.data)) {
                                    response=event.data;
                                }


                            } catch (e) {
                                $("#infomsg").html("Sorry, connection failed ...");
                                //console.log('error:'+ e);
                                response = {'error': e,updatetime:new Date(),_isstring:false,_iserror:true,_isread:false};
                            }
                            
                            if(response.json.actioncode=="heartbeats")
                            	heartbeatcollection.push(response);
                            else if(response.actioncode=="data")
                            	datacollection.push(response);
                            else if(response.actioncode=="error")
                            	errorcollection.push(response);
                        });
                        ws.onError(function (event) {
                            console.log('connection Error', event);
                        });
                        ws.onClose(function (event) {
                            console.log('connection closed', event);
                        });
                        ws.onOpen(function () {
                            console.log('connection open');
                            //ws.send('HELLO SERVER');
                        });
                        return {
                            datacollection:datacollection,
                            status: function () {
                                return ws.readyState;
                            },
                            send: function (message) {
                                if (angular.isString(message)) {
                                    ws.send(message);
                                }
                                else if (angular.isObject(message)) {
                                    ws.send(JSON.stringify(message));
                                }
                            }
                        };

    }).controller('userCtrl', function($scope, $http,WS) {
    // Display the buttons
    $scope.WS=WS;
   	$scope.client={{{client}}};
   	var userdata={ username:"AAAAAAAAAAAAAA", password:"", createddate:new Date(), gui:"uuidV4()", parent:"1111111", email:"", phone1:"55555555555555", phone2:"", address:"", photo:"", memberlevel:"", twinusergui:"", binid:"", userlevelid:""};//as a userid or parentid userside:0 //0 : LEFT , 1: RIGHT };
   	$scope.client={};
	$scope.client.lastaccess=formatDate(new Date($scope.client.lastaccess),5);	
	$scope.data=$scope.client.data;
	$scope.data=userdata;
	$scope.loadChildren=function (){
		//validate login info

		// check login data
		WS.send({
		sendtime:new Date(),
		data:$scope.client,
		actioncode:"login",
		});
		console.log(WS.datacollection);
		//redirect to user profile mainpage
		
	}
	});



	var myTree;
	$(function(){
	    myTree = $("#binTree").btree()[0];   // create the tree and associated to '#treeDiv'
	});

	function redraw(){
	    myTree.clear();     // remove the tree
	    myTree = $("#binTree").btree({
	        branchColor: $("#color").val(),     // Take the color from '#color' input
	        branchStroke: $("#stroke").val(),     // Take the branch stroke from '#stroke' input
	        hSpace: $("#hSpace").val(),         // Take the horizontal space from '#hSpace' input
	        vSpace: $("#vSpace").val(),         // Take the vertical space from '#vSpace' input
	        borderWidth: $("#border").val(),     // Take the width border from '#border' input
	        horizontal: $("#horizontal").attr('checked'),    // Take the orientation from '#horizontal' input
	        flip: $("#flip").attr('checked')       // Do you want to flip the tree? from '#flip' input
	    })[0];
	}
</script>
{{{{raw}}}}
<div ng-app="topup" ng-controller="userCtrl" ng-init="initVals()" class="form-group container" data>
	<h3>User</h3>
	<div>
		<img  src="{{this.data.photo}}"/>
		<div ng-bind="this.data.username"></div>
	</div>
	<div ng-bind="this.data.parent"></div>
	<div ng-bind="this.data.email"></div>
	<div ng-bind="this.data.address"></div>
	<div ng-bind="this.data.phone1"></div>
	<div ng-bind="this.data.binid"></div>

	<div></div>
	var userdata={
    username:"",
    password:"",
    createddate:new Date(),
    gui:uuidV4(),
    parent:"",
    email:"",
    phone1:"",
    phone2:"",
    address:"",
    photo:"",
    memberlevel:"",
    twinusergui:"",
    binid:"",
    userlevelid:"",//as a userid or parentid
    userside:0 //0 : LEFT , 1: RIGHT
    };
	<hr/>
	<h3>Balance</h3>
	<hr/>
	BALANCE:XXXXX.XXXXX
	TOPUP:XXXX.XXXX
	BONUS:XXXX.XXX
	COUPLING: XXXX.XXXX
	<hr/>
	<h3>Members</h3>	
	<hr/>
	<h2>TOTAL MEMBER:xxx.xxx</h2>
	<table id="example" class="table table-striped table-bordered" cellspacing="0" width="50%">
				        <thead>
				            <tr>
				                <th>Package name</th>
				                <th>total member</th>
				                <th>total value</th>				                
				            </tr>
				        </thead>				        
				            <tr>
				                <th>100.000</th>
				                <th>10.000</th>
				                <th>1.000.000.000</th>				                
				            </tr>
				            <tr>
				                <th>350.000</th>
				                <th>50.000</th>
				                <th>17.500.000.000</th>				                
				            </tr>
				            <tr>
				                <th>1.750.0000</th>
				                <th>1000</th>
				                <th>1.750.000.000</th>				                
				            </tr>				        
				            <tr>
				                <th></th>
				                <th>XXXXXXXXXXXXXX</th>
				                <th>XXXXXXXXXXXXXX</th>				                
				            </tr>
				    </table>
	<hr/>
	<!-- SO BELOW BOTH  search results-->
	<table id="example" class="table table-striped table-bordered" cellspacing="0" width="50%">
	        <thead>
	            <tr>
	                <th>LEFT</th>
	                <th>RIGHT</th>
	            </tr>
	        </thead>
	        <tr>
	        	<td>
	        	<h2>LEFT SCORE: xxxx.xxxx</h2>	        	
	        	<button type="button">Add member</button>
					<table id="example" class="table table-striped table-bordered" cellspacing="0" width="50%">
								        <thead>
								            <tr>
								                <th>Package name</th>
								                <th>total member</th>
								                <th>total value</th>				                
								            </tr>
								        </thead>				        
								            <tr>
								                <th>100.000</th>
								                <th>10.000</th>
								                <th>1.000.000.000</th>				                
								            </tr>
								            <tr>
								                <th>350.000</th>
								                <th>50.000</th>
								                <th>17.500.000.000</th>				                
								            </tr>
								            <tr>
								                <th>1.750.0000</th>
								                <th>1000</th>
								                <th>1.750.000.000</th>				                
								            </tr>
								            <tr>
								                <th></th>
								                <th>XXXXXXXXXXXXXX</th>
								                <th>XXXXXXXXXXXXXX</th>				                
								            </tr>				        
								    </table>
					<hr/>
	        		<table id="example" class="table table-striped table-bordered" cellspacing="0" width="50%">
				        <thead>
				            <tr>
				                <th>Member</th>
				                <th>Join date</th>
				                <th>member</th>
				                <th>value</th>
				            </tr>
				        </thead>				        
				            <tr>
				                <td>Name</td>
				                <td>DD/MM/YYYY</td>
				                <td>XXX</td>
				                <td>XXX.XXX</td>
				            </tr>				        
				    </table>
	        	</td>
	        	<td>
	        	<h2>RIGHT SCORE: xxxx.xxxx</h2>	 
	        	<button type="button">Add member</button>       	
					<table id="example" class="table table-striped table-bordered" cellspacing="0" width="50%">
								        <thead>
								            <tr>
								                <th>Package name</th>
								                <th>total member</th>
								                <th>total value</th>				                
								            </tr>
								        </thead>				        
								            <tr>
								                <th>100.000</th>
								                <th>10.000</th>
								                <th>1.000.000.000</th>				                
								            </tr>
								            <tr>
								                <th>350.000</th>
								                <th>50.000</th>
								                <th>17.500.000.000</th>				                
								            </tr>
								            <tr>
								                <th>1.750.0000</th>
								                <th>1000</th>
								                <th>1.750.000.000</th>				                
								            </tr>	
								            <tr>
								                <th></th>
								                <th>XXXXXXXXXXXXXX</th>
								                <th>XXXXXXXXXXXXXX</th>				                
								            </tr>			        
								    </table>
					<hr/>
	        		<table id="example" class="table table-striped table-bordered" cellspacing="0" width="50%">
				        <thead>
				            <tr>
				                <th>Member</th>
				                <th>Join date</th>
				                <th>member</th>
				                <th>value</th>
				            </tr>
				        </thead>				        
				            <tr>
				                <td>Name</td>
				                <td>DD/MM/YYYY</td>
				                <td>XXX</td>
				                <td>XXX.XXX</td>
				            </tr>				        
				    </table>
	        	</td>
	        </tr>
	    </table>
		
		
			
	</div>	
	<h3>Search :<input type="" name="" /></h3>
	<h3>binary graphic</h3>
	<hr/>
	<div id="binTree">
		
	</div>

</div>
{{{{/raw}}}}